<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Carbon Equivalents Test - ZeroCarb</title>
    <style>
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif; padding: 20px; max-width: 800px; margin: 0 auto; }
        .test-case { background: #f8fafc; padding: 16px; margin: 12px 0; border-radius: 8px; border-left: 4px solid #3b82f6; }
        .correct { border-left-color: #10b981; background: #f0fdf4; }
        .incorrect { border-left-color: #ef4444; background: #fef2f2; }
        .calculation { font-family: monospace; background: #e5e7eb; padding: 8px; border-radius: 4px; margin: 8px 0; }
        table { width: 100%; border-collapse: collapse; margin: 20px 0; }
        th, td { padding: 12px; text-align: left; border-bottom: 1px solid #e5e7eb; }
        th { background: #f8fafc; font-weight: 600; }
    </style>
</head>
<body>
    <h1>Carbon Equivalents Accuracy Test</h1>
    
    <div class="test-case">
        <h3>Test Case: 0.4kg (400g) CO₂ Savings</h3>
        <div id="test-400g"></div>
    </div>
    
    <div class="test-case">
        <h3>Scientific Reference Values</h3>
        <table>
            <thead>
                <tr>
                    <th>Activity</th>
                    <th>CO₂ Emissions</th>
                    <th>Source</th>
                    <th>Our Value</th>
                    <th>Status</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td>1 km by car (average)</td>
                    <td>180g CO₂</td>
                    <td>EPA 2023</td>
                    <td id="car-value">180g</td>
                    <td id="car-status">✓</td>
                </tr>
                <tr>
                    <td>1 tree absorption/year</td>
                    <td>21kg CO₂</td>
                    <td>USDA Forest Service</td>
                    <td id="tree-value">21kg</td>
                    <td id="tree-status">✓</td>
                </tr>
                <tr>
                    <td>1 hour HD streaming</td>
                    <td>36g CO₂</td>
                    <td>Carbon Trust 2021</td>
                    <td id="streaming-value">36g</td>
                    <td id="streaming-status">✓</td>
                </tr>
                <tr>
                    <td>1 smartphone charge</td>
                    <td>8g CO₂</td>
                    <td>Various studies</td>
                    <td id="phone-value">8g</td>
                    <td id="phone-status">✓</td>
                </tr>
            </tbody>
        </table>
    </div>
    
    <div class="test-case">
        <h3>Before vs After Comparison</h3>
        <div id="comparison"></div>
    </div>

    <script>
        // Load the corrected function
        function getCarbonEquivalents(grams) {
            return {
                carKm: (grams / 180).toFixed(1),           // Corrected: 180g/km (was 120g)
                phoneCharges: Math.round(grams / 8),       
                treesYear: (grams / 21000).toFixed(2),     // Corrected: 21kg/year
                treeDays: (grams / 58).toFixed(1),         
                coffeeCups: Math.round(grams / 21),        
                streamingHours: (grams / 36).toFixed(1),   // Corrected: 36g/hour (was 55g)
                ledBulbHours: Math.round(grams / 0.5),     
                kwh: (grams / 400).toFixed(2)              
            };
        }
        
        // Old function for comparison
        function getCarbonEquivalentsOld(grams) {
            return {
                carKm: (grams / 120).toFixed(1),           // Old: 120g/km
                treesYear: (grams / 21000 * 12).toFixed(0), // Old: Wrong calculation
                streamingHours: (grams / 55).toFixed(1),   // Old: 55g/hour
            };
        }
        
        function runTest() {
            const testAmount = 400; // 0.4kg as shown in the screenshot
            
            const corrected = getCarbonEquivalents(testAmount);
            const old = getCarbonEquivalentsOld(testAmount);
            
            // Test the 400g case
            document.getElementById('test-400g').innerHTML = `
                <div class="calculation">
                    <strong>Input:</strong> 400g CO₂ saved<br>
                    <strong>Driving equivalent:</strong> ${corrected.carKm} km (400g ÷ 180g/km)<br>
                    <strong>Trees equivalent:</strong> ${corrected.treesYear} trees for a year (400g ÷ 21,000g/tree/year)<br>
                    <strong>Streaming equivalent:</strong> ${corrected.streamingHours} hours HD video (400g ÷ 36g/hour)
                </div>
                <div style="margin-top: 12px;">
                    <strong>Realistic Assessment:</strong><br>
                    • ${corrected.carKm} km driving = reasonable for 400g CO₂<br>
                    • ${corrected.treesYear} trees = much more realistic than "1 tree"<br>
                    • Values now align with scientific literature
                </div>
            `;
            
            // Comparison
            document.getElementById('comparison').innerHTML = `
                <table>
                    <thead>
                        <tr><th>Metric</th><th>Old Calculation</th><th>New Calculation</th><th>Improvement</th></tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>Driving (400g)</td>
                            <td>${old.carKm} km</td>
                            <td>${corrected.carKm} km</td>
                            <td class="correct">More realistic (EPA data)</td>
                        </tr>
                        <tr>
                            <td>Trees (400g)</td>
                            <td>${old.treesYear} trees</td>
                            <td>${corrected.treesYear} trees</td>
                            <td class="correct">Scientifically accurate</td>
                        </tr>
                        <tr>
                            <td>Streaming (400g)</td>
                            <td>${old.streamingHours} hours</td>
                            <td>${corrected.streamingHours} hours</td>
                            <td class="correct">Updated to HD streaming</td>
                        </tr>
                    </tbody>
                </table>
            `;
        }
        
        // Run test when page loads
        document.addEventListener('DOMContentLoaded', runTest);
    </script>
</body>
</html>